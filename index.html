<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pandomim Ödül Çarkı</title>
  <style>
    /* Reset ve sayfa düzeni */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #fff;
      font-family: Arial, sans-serif;
    }

    /* Çark çerçevesi ve dönüş efekti */
    .wheel {
      width: 300px;
      height: 300px;
      border: 10px solid #000;
      border-radius: 50%;
      overflow: hidden;
      transition: transform 6s ease-out;
      margin: 20px 0;
    }

    /* Dilimler ve metin hizalama */
    .sector {
      --rot: calc(var(--i) * 36deg);
      position: absolute;
      width: 50%;
      height: 50%;
      transform-origin: 100% 100%;
      transform: rotate(var(--rot));
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .sector:nth-child(odd)  { background: #000; }
    .sector:nth-child(even) { background: #eee; }

    .sector span {
      display: block;
      width: 80px;
      text-align: center;
      font-size: 13px;
      font-weight: bold;
      transform: rotate(calc(-1 * var(--rot)));
    }
    .sector:nth-child(odd)  span { color: #fff; }
    .sector:nth-child(even) span { color: #000; }

    /* Logo imleç */
    .logo-pointer {
      width: 80px;
      height: 80px;
      margin-bottom: -50px;
      transform: rotate(180deg);
    }

    /* Buton ve bilgi metni */
    button {
      margin: 10px 0;
      padding: 10px 20px;
      background: #000;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    p.info {
      margin-top: 20px;
      font-size: 14px;
      color: #444;
      text-align: center;
      max-width: 320px;
    }
    p#motive {
      margin-top: 20px;
      font-size: 15px;
      font-weight: bold;
      color: #222;
    }
  </style>
</head>

<body>
  <!-- Logo imleç -->
  <img src="logo_resized.png" class="logo-pointer" alt="Pandomim Logo">

  <!-- Ödül Çarkı -->
  <div class="wheel" id="wheel">
    <div class="sector" style="--i:0;"><span>Tatlı + Türk Kahvesi</span></div>
    <div class="sector" style="--i:1;"><span>2 Adet Soğuk İçecek</span></div>
    <div class="sector" style="--i:2;"><span>Nargile Bedava</span></div>
    <div class="sector" style="--i:3;"><span>2 Bira + 1 Cips</span></div>
    <div class="sector" style="--i:4;"><span>%20 İndirim</span></div>
    <div class="sector" style="--i:5;"><span>Milkshake / Soğuk Kahve</span></div>
    <div class="sector" style="--i:6;"><span>Şansını Bir Daha Dene</span></div>
    <div class="sector" style="--i:7;"><span>3 Top Dondurma</span></div>
    <div class="sector" style="--i:8;"><span>Boş Dilim 😄</span></div>
    <div class="sector" style="--i:9;"><span>%10 İndirim</span></div>
  </div>

  <!-- Çevirme butonu -->
  <button onclick="spin()">Çevir!</button>

  <!-- Motive edici cümle -->
  <p id="motive">"Bugün harika bir gün olabilir, yeter ki sen iste."</p>
  <button onclick="newMotive()" style="background:#444;">Bir tane daha!</button>

  <!-- Bilgilendirme -->
  <p class="info">
    Tüm ödüller için <strong>Instagram hesabımızı takip edin</strong> ve
    <strong>DM'den ekran görüntüsü gönderin</strong>.<br>
    Her cihaz yalnızca <strong>haftada 2 kez</strong> çark çevirebilir.
  </p>

  <!-- JavaScript -->
  <script>
    let deg = 0, motCount = 0;
    const weekMs = 7*24*60*60*1000, maxSpins = 2;
    const wheel = document.getElementById("wheel");
    const prizes = [
      "Tatlı + Türk Kahvesi","2 Adet Soğuk İçecek","Nargile Bedava",
      "2 Bira + 1 Cips","%20 İndirim","Milkshake / Soğuk Kahve",
      "Şansını Bir Daha Dene","3 Top Dondurma","Boş Dilim 😄","%10 İndirim"
    ];
    const motives = [
      "Bugün harika bir gün olabilir, yeter ki sen iste.",
      "Şans hazır olanı sever.",
      "Küçük bir adım, büyük değişimlerin başlangıcıdır.",
      "Pes etme, belki de zafer bir sonraki denemededir.",
      "Gülümse, çünkü enerjin çevreni etkiler.",
      "Unutma: En karanlık an, şafağa en yakın olandır."
    ];

    function canSpin(){
      let cnt = localStorage.getItem("spinCount"),
          last= localStorage.getItem("lastSpinTime"),
          now = Date.now();
      if(!last || now-last>weekMs){
        localStorage.setItem("spinCount",0);
        localStorage.setItem("lastSpinTime",now);
      }
      return Number(localStorage.getItem("spinCount"))<maxSpins;
    }
    function recordSpin(){
      let c=Number(localStorage.getItem("spinCount")||0);
      localStorage.setItem("spinCount",c+1);
    }

    function spin(){
      if(!canSpin()){
        return alert("Çevirme hakkınız doldu. Bir hafta sonra tekrar deneyin.");
      }
      recordSpin();
      const spinNo=Number(localStorage.getItem("spinCount")),
            low=[6,8,9];
      if(spinNo===2){
        const idx=low[Math.floor(Math.random()*low.length)];
        deg+=360*4 + (360-(idx*36)-18);
      } else {
        deg+=360*(3+Math.floor(Math.random()*3)) + Math.floor(Math.random()*360);
      }
      wheel.style.transform=`rotate(${deg}deg)`;
      setTimeout(()=>{
        let norm=deg%360, corr=360-norm,
            idx = spinNo===2
                  ? low[Math.floor(Math.random()*low.length)]
                  : Math.floor(corr/36)%10;
        alert("Kazandın: "+prizes[idx]);
      },6200);
    }

    function newMotive(){
      motCount++;
      const el=document.getElementById("motive");
      if(motCount>=3){
        el.innerText = '"Artık başka cümle yok... Cafede dertleşiriz ☕"';
        return;
      }
      el.innerText = '"'+motives[Math.floor(Math.random()*motives.length)]+'"';
    }
  </script>
</body>
</html>
