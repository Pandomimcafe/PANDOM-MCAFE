
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pandomim Cafe - TEST SayfasÄ±</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background: linear-gradient(135deg, #fdfcfb, #e2d1c3);
      padding: 2rem;
    }
    h1 { color: #5d1049; }
    .quote-box {
      margin: 20px auto;
      padding: 1rem;
      background: linear-gradient(135deg, #ffefba, #ffffff);
      border: 2px dashed #673ab7;
      border-radius: 16px;
      max-width: 500px;
      font-size: 1.2rem;
    }
    canvas {
      border: 4px solid #5d1049;
      border-radius: 50%;
      display: block;
      width: 100%;
      max-width: 400px;
      height: auto;
      margin: 20px auto;
    }
    button {
      padding: 10px 20px;
      margin: 10px;
      background-color: #5d1049;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .instagram-btn {
      display:inline-block;
      margin-top:20px;
      padding:10px 20px;
      background:#e1306c;
      color:#fff;
      border-radius:8px;
      text-decoration:none;
    }
    .info-box {
      margin-top: 2rem;
      padding: 1rem;
      background: #fff9c4;
      border: 1px solid #fdd835;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="logo">
    <img src="logo.png" alt="Pandomim Cafe Logo" width="120" style="margin-bottom: 20px;">
  </div>
  <h1>ğŸš§ TEST SayfasÄ± - Pandomim Ã‡ark</h1>
  <div class="quote-box" id="quoteBox">YÃ¼kleniyor...</div>
  <button onclick="showNewQuote()">Bir gÃ¼zel sÃ¶z daha</button>
  <canvas id="wheelCanvas" width="400" height="400"></canvas>
  <button onclick="spin()">Ã‡arkÄ± Ã‡evir</button>
  <div id="wheelResult"></div>
  <div class="info-box">
    <strong>ğŸŸ¡ Bilgilendirme:</strong><br>
    Bu Ã§ark sadece 2 kez Ã§evrilebilir.<br>
    2. hakkÄ± kullanÄ±rsan, ilk hakkÄ±n da harcanmÄ±ÅŸ olur.<br><br>
    ğŸ“¸ Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ al, <strong>@pandomimcafe</strong> hesabÄ±nÄ± takip et ve DM'den gÃ¶nder.<br>
    ğŸ Seni sÃ¼rpriz bir ikram bekliyor!
  </div>
  <a class="instagram-btn" href="https://www.instagram.com/pandomimcafe" target="_blank">Instagram'da Takip Et</a>

  <script>
    const quotes = [
      "Sen dÃ¼ÅŸÃ¼ndÃ¼ÄŸÃ¼nden daha gÃ¼Ã§lÃ¼sÃ¼n.",
      "BugÃ¼n baÅŸlamak iÃ§in harika bir gÃ¼n.",
      "Her ÅŸey seninle baÅŸlar.",
      "Hayat senin hikÃ¢yen, cesaretle yaz.",
      "Kendine inandÄ±ÄŸÄ±n sÃ¼rece imkÃ¢nsÄ±z yok.",
      "Bir gÃ¼lÃ¼mseme her ÅŸeyi deÄŸiÅŸtirebilir.",
      "Sen bu dÃ¼nyanÄ±n bir armaÄŸanÄ±sÄ±n."
    ];
    const rewards = [
      "Nargile Bedava", "2 Bira + 1 Cips = 200â‚º", "Ãœcretsiz TÃ¼rk Kahvesi",
      "TatlÄ± Alana Ã‡ay", "%10 Ä°ndirim", "SÄ±cak Ã‡ikolatada %50",
      "3 Top Dondurma Hediye", "Instagram'da Etiketle",
      "HikÃ¢yende PaylaÅŸ = Kahve", "ÅansÄ±nÄ± Bir Dahaki Sefere Dene"
    ];
    const consolation = [
      "ÅansÄ±nÄ± bir dahaki sefere dene",
      "BugÃ¼nlÃ¼k enerjin tÃ¼kenmiÅŸ",
      "Pandomim seni Ã¶zledi ama Ã¶dÃ¼l yok ğŸ˜…"
    ];
    const realPrizes = rewards.slice(0, 9);
    let quoteClicks = 0;
    let lastQuote = "";

    function showNewQuote() {
      if (quoteClicks >= 2) {
        document.getElementById("quoteBox").textContent = "3. sÃ¶z burada yok... Cafeâ€™de dertleÅŸiriz. Bekliyoruz ğŸ˜Š";
        return;
      }
      let newQuote;
      do {
        newQuote = quotes[Math.floor(Math.random() * quotes.length)];
      } while (newQuote === lastQuote);
      lastQuote = newQuote;
      document.getElementById("quoteBox").textContent = newQuote;
      quoteClicks++;
    }

    const canvas = document.getElementById("wheelCanvas");
    const ctx = canvas.getContext("2d");
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const colors = ["#f44336", "#e91e63", "#9c27b0", "#3f51b5", "#03a9f4", "#009688", "#4caf50", "#ffeb3b", "#ff9800", "#795548"];
    const arc = Math.PI * 2 / rewards.length;
    let startAngle = 0;
    let spinning = false;

    
function drawWheel(rotation = startAngle) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  for (let i = 0; i < rewards.length; i++) {
    const angle = rotation + i * arc;
    ctx.fillStyle = colors[i % colors.length];
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.arc(centerX, centerY, 200, angle, angle + arc);
    ctx.lineTo(centerX, centerY);
    ctx.fill();

    ctx.save();
    ctx.fillStyle = "#fff";
    ctx.translate(centerX, centerY);
    ctx.rotate(angle + arc / 2);
    ctx.textAlign = "right";
    ctx.font = "bold 14px sans-serif";
    ctx.fillText(rewards[i], 180, 0);
    ctx.restore();
  }
}
    }

    
function spin() {
  if (spinning) return;
  spinning = true;

  let spinAngle = Math.random() * Math.PI * 4 + Math.PI * 10;
  let duration = 3000;
  let start = null;
  let currentAngle = 0;

  const now = new Date();
  const lastUse = localStorage.getItem("pandomim_son_kullanim");
  if (lastUse && (now - new Date(lastUse)) < 7 * 24 * 60 * 60 * 1000) {
    const hak = parseInt(localStorage.getItem("pandomim_haklar") || "0");
    if (hak <= 0) {
      alert("TÃ¼m haklarÄ±nÄ±z doldu. 1 hafta sonra tekrar deneyin.");
      spinning = false;
      return;
    }
  }

  let hak = parseInt(localStorage.getItem("pandomim_haklar") || "2");
  if (hak <= 0) {
    alert("TÃ¼m haklarÄ±nÄ±z doldu.");
    spinning = false;
    return;
  }

  function animate(timestamp) {
    if (!start) start = timestamp;
    const progress = timestamp - start;
    const eased = easeOut(progress / duration);
    currentAngle = eased * spinAngle;
    drawWheel(startAngle + currentAngle);
    if (progress < duration) {
      requestAnimationFrame(animate);
    } else {
      spinning = false;
      startAngle += currentAngle;
      const index = Math.floor((rewards.length - (startAngle % (2 * Math.PI)) / arc) % rewards.length);
      let prize = (hak === 2)
        ? rewards[index]
        : (Math.random() < 0.65
          ? consolation[Math.floor(Math.random() * consolation.length)]
          : realPrizes[Math.floor(Math.random() * realPrizes.length)]);

      document.getElementById("wheelResult").textContent = "KazandÄ±nÄ±z: " + prize;
      localStorage.setItem("pandomim_haklar", (hak - 1).toString());
      if (hak === 1) localStorage.setItem("pandomim_son_kullanim", now.toString());
    }
  }

  requestAnimationFrame(animate);
}
 else {
          spinning = false;
          const index = Math.floor((rewards.length - (startAngle % (2 * Math.PI)) / arc) % rewards.length);
          let prize = (hak === 2)
            ? rewards[index]
            : (Math.random() < 0.65
              ? consolation[Math.floor(Math.random() * consolation.length)]
              : realPrizes[Math.floor(Math.random() * realPrizes.length)]);

          document.getElementById("wheelResult").textContent = "KazandÄ±nÄ±z: " + prize;
          localStorage.setItem("pandomim_haklar", (hak - 1).toString());
          if (hak === 1) localStorage.setItem("pandomim_son_kullanim", now.toString());
        }
      }

      requestAnimationFrame(animate);
    }

    function easeOut(t) {
      return 1 - Math.pow(1 - t, 3);
    }

    drawWheel();
    document.addEventListener("DOMContentLoaded", function () {
  showNewQuote();
});
    if (!localStorage.getItem("pandomim_haklar")) {
      localStorage.setItem("pandomim_haklar", "2");
    }
  </script>
</body>
</html>
